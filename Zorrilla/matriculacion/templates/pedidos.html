<html>

<head>
	{% load static %}
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.1/js/materialize.min.js">

    </script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="{% static "css.css" %}">
</head>

<body>
		<div id="matriculaciones">
        {% for m in matriculaciones %}
	        <div class="container">
		        <div class="col s12 div">
		          <div class="card light-blue lighten-2 z-depth-5" >
		            <div class="card-content black-text">
		              <center><span class="card-title">{{m.alumno.nombre}}</span></center>
		              <div class="card-action light-blue lighten-3 z-depth-2">
		              <p>{{m.alumno.dni}}</p>
		              <br>
		              <span>{{m.fecha_matriculacion|date:"d/M/Y"}}</span>
		              </div>

		              <div>

										<a onclick="aceptar_matriculacion('{% url 'aceptar_matriculacion' m.id %}', {{m.id}})"
										id="myBtn" class="waves-effect waves-light btn blue darken-4"></a>
		              </div>
		              <!--<div><a class="btn-floating halfway-fab waves-effect waves-light red"><i class="material-icons black cyan-text">repeat</i></a></div>!-->

		            </div>
		          </div>
	        </div>
	        </div>
      {% endfor %}
		</div>
</body>


<script>

function updateDiv()
{
    $( "#matriculaciones" ).load(window.location.href + " #matriculaciones" );
}

function aceptar_matriculacion(url, alum) {
	  $.ajax({
				method: "POST",
				url: url,
				data: {
	 				csrfmiddlewaretoken: '{{ csrf_token }}'
				}
			})
			.done(function (data) {
			    Materialize.toast(data.estado, 2000, 'green');
			 		updateDiv()
			});
		};

</script>

</html>
