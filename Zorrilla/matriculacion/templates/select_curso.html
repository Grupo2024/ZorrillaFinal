<div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
        <div class="modal-header">
            <h4 class="modal-title">Seleccion curso para {{alumno.nombre}}</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

      <!-- Modal body -->
        <form id="form_for_curso" method="post">
            {% csrf_token %}
            <div class="modal-body">
                <span class="badge badge-secondary">Cursos:</span>
                <select name="" onchange="curso(event)">
                    <option disabled selected>Choose Database Type</option>
                    {% for seccion in secciones %}
                        <option value="{{seccion.id}}">{{seccion}}</option>
                    {% endfor %}
                </select>
                <input name="selected_curso" id="selected_curso" type="hidden">
                <input name="dni_alumno" id="dni_alumno" type="hidden" value="{{alumno.dni}}">
            </div>
        </form>
        <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" onclick="matricular_alumno()">Matricular</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
    </div>
</div>


<script>

   function matricular_alumno(){
        var myForm = document.getElementById('form_for_curso');
        formData = new FormData(myForm);
        $.ajax({
            url: '/aceptar_matriculacion/',
            data: formData,
            processData: false,
            contentType: false,
            type: 'POST',
            success: function(data){
                console.log(data.error);
                if (data.error){
                    alert(data.estado)
                }else{
                    var x = document.getElementById("datos_modal");
                    $(x).modal('hide');
                    updateDiv();
                    var y = document.getElementById("snackbar");
                    y.className = "show";
                    document.getElementById("span_result").innerHTML = data.estado;
                    setTimeout(function(){ y.className = y.className.replace("show", ""); }, 2000);
                }
            }
        });
    }    
</script>