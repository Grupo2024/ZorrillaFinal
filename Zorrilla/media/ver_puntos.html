<!DOCTYPE html>
<html>
<head>
	<title>Puntajes</title>
    <h1 align= "center"> Puntos</h1>
	<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.5.3/firebase.js"></script>


<script src="https://www.gstatic.com/firebasejs/3.6.0/firebase.js"></script>
        <script src = "funciones.js" ></script>
    <script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyAF9hTymbi3CGf7qzep3gHUXVCxWeYRe8Q",
        authDomain: "proyecto-3a97f.firebaseapp.com",
        databaseURL: "https://proyecto-3a97f.firebaseio.com",
        storageBucket: "proyecto-3a97f.appspot.com",
        messagingSenderId: "359005572677"
    };
    firebase.initializeApp(config);
</script>
</head>
<body class="w3-white w3-content" style="max-width:2000px">
<div class="w3-overlay w3-animate-opacity" onclick="w3_close()" style="cursor:pointer" id="myOverlay"></div>

    <!-- Overlay effect when opening sidenav on small screens -->
<div class="w3-overlay w3-hide-large w3-animate-opacity" mouseover="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

        <table class="striped">
        <thead>
          <tr>
              <th data-field="Equipos">Jugador</th>
              <th data-field="FT">Deportes</th>
              <th data-field="PH">Informática</th>
              <th data-field="TO">Total</th>


          </tr>
        </thead>

        <tbody id="equipos">


        </tbody>
      </table>
      <script>
function buscar(){
		var qn = firebase.database().ref('usuarios/').orderByChild('total');
		//buscamos notas
		qn.once('value', function(usuarios){
			usuarios.forEach(function(user){
				var dato_user = user.val();
                var pft = dato_user.puntos_fut_nacional + dato_user.puntos_fut_internacional + dato_user.puntos_tenis_nacional + dato_user.puntos_tenis_internacional + dato_user.puntos_deportes_varios;
                var pph = dato_user.puntos_inf_programación + dato_user.puntos_inf_hardware + dato_user.puntos_inf_general;
				var fila = "<tr><td>";
		      	fila += dato_user.nombre_usuario +"</td><td>";
		      	fila += pft +"</td><td>";
		      	fila += pph +"</td><td>";
                fila += dato_user.total +"</td></tr>";
 				$("#equipos").prepend(fila);
			});
		});
	}
	buscar();
      </script>

</body>
</html>
